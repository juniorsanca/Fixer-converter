{"remainingRequest":"/Users/user/Desktop/com-dep-reg-o/node_modules/babel-loader/lib/index.js!/Users/user/Desktop/com-dep-reg-o/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/user/Desktop/com-dep-reg-o/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/user/Desktop/com-dep-reg-o/src/components/communes/RechercheCommunes.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/user/Desktop/com-dep-reg-o/src/components/communes/RechercheCommunes.vue","mtime":1612737329606},{"path":"/Users/user/Desktop/com-dep-reg-o/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/com-dep-reg-o/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/user/Desktop/com-dep-reg-o/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Desktop/com-dep-reg-o/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlc3VsdGF0RGVSZWNoZXJjaGUgZnJvbSAiQC9jb21wb25lbnRzL2NvbW11bmVzL1Jlc3VsdGF0RGVSZWNoZXJjaGUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1JlY2hlcmNoZUNvbW11bmVzJywKICBjb21wb25lbnRzOiB7CiAgICBSZXN1bHRhdERlUmVjaGVyY2hlOiBSZXN1bHRhdERlUmVjaGVyY2hlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlsbGU6ICIiLAogICAgICByZXN1bHQ6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCh0aGlzLnZpbGxlKTsKICAgICAgY29uc29sZS5sb2codGhpcy52aWxsZSk7CiAgICAgIHsKICAgICAgICB2YXIgaXNWYWxpZE5hbWUgPSAvXlthLXpBLVpdKyQvLnRlc3QodGhpcy52aWxsZSk7CiAgICAgICAgdmFyIGlzVmFsaWRaaXAgPSAvXlswLTldezV9PyQvLnRlc3QodGhpcy52aWxsZSk7CgogICAgICAgIGlmIChpc1ZhbGlkWmlwKSB7CiAgICAgICAgICBheGlvcy5nZXQoImh0dHBzOi8vZ2VvLmFwaS5nb3V2LmZyL2NvbW11bmVzP2NvZGVQb3N0YWw9Ii5jb25jYXQodGhpcy52aWxsZSkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIF90aGlzLnJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLnJlc3VsdCk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKGlzVmFsaWROYW1lKSBheGlvcy5nZXQoImh0dHBzOi8vZ2VvLmFwaS5nb3V2LmZyL2NvbW11bmVzP25vbT0iLmNvbmNhdCh0aGlzLnZpbGxlLCAiJmJvb3N0PXBvcHVsYXRpb24mZmllbGRzPXBvcHVsYXRpb24sZGVwYXJ0ZW1lbnQsY29kZXNQb3N0YXV4LHJlZ2lvbiIpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICByZXNwb25zZS5kYXRhOwogICAgICAgICAgICBfdGhpcy5yZXN1bHQgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5yZXN1bHQpOwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKCFpc1ZhbGlkTmFtZSB8fCB0aGlzLnZpbGxlID09PSAiIikgewogICAgICAgICAgICBhbGVydCgndmV1aWxsZXogZW50cmVyIHVuZSB2aWxsZSBvdSBjb2RlIHBvc3RhbCB2YWxpZGUsIG1lcmNpIScpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlbG9hZFBhZ2U6IGZ1bmN0aW9uIHJlbG9hZFBhZ2UoKSB7CiAgICAgIHRoaXMucmVzdWx0ID0gbnVsbDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/user/Desktop/com-dep-reg-o/src/components/communes/RechercheCommunes.vue"],"names":[],"mappings":"AAiBI,OAAO,mBAAP,MAAgC,2CAAhC;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACX,EAAA,IAAI,EAAE,mBADK;AAEX,EAAA,UAAU,EAAE;AACR,IAAA,mBAAmB,EAAnB;AADQ,GAFD;AAKX,EAAA,IALW,kBAKH;AACJ,WAAO;AACH,MAAA,KAAK,EAAE,EADJ;AAEH,MAAA,MAAM,EAAC;AAFJ,KAAP;AAIH,GAVU;AAWX,EAAA,OAAO,EAAE;AACL,IAAA,QADK,oBACI,CADJ,EACM;AAAA;;AACP,MAAA,CAAC,CAAC,cAAF,CAAiB,KAAK,KAAtB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,KAAjB;AACA;AACI,YAAM,WAAU,GAAI,cAAc,IAAd,CAAmB,KAAK,KAAxB,CAApB;AACA,YAAM,UAAS,GAAI,cAAc,IAAd,CAAmB,KAAK,KAAxB,CAAnB;;AACA,YAAI,UAAJ,EAAe;AACX,UAAA,KAAK,CAAC,GAAN,uDAAyD,KAAK,KAA9D,GACK,IADL,CACU,UAAC,QAAD,EAAc;AAChB,YAAA,QAAQ,CAAC,IAAT;AACA,YAAA,KAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAvB;AACA,YAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,MAAjB;AACH,WALL;AAMJ,SAPA,MAOO;AACH,cAAI,WAAJ,EACI,KAAK,CAAC,GAAN,gDAAkD,KAAK,KAAvD,0EACK,IADL,CACU,UAAC,QAAD,EAAc;AAChB,YAAA,QAAQ,CAAC,IAAT;AACI,YAAA,KAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAvB;AACA,YAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,MAAjB;AACT,WALH;;AAMJ,cAAI,CAAC,WAAD,IAAgB,KAAK,KAAL,KAAe,EAAnC,EAAsC;AAClC,YAAA,KAAK,CAAC,yDAAD,CAAL;AACJ;AACJ;AACJ;AACH,KA3BI;AA4BL,IAAA,UA5BK,wBA4BO;AACR,WAAK,MAAL,GAAc,IAAd;AACJ;AA9BK;AAXE,CAAf","sourcesContent":["<template>\n    <form @submit=\"onSubmit\">\n        <ion-toolbar color=\"light\">\n            <ion-input  id=\"ville\" style=\"margin-left: 10px\"\n                        name=\"ville\"\n                        :value=\"ville\"\n                        @input=\"ville = $event.target.value\" show-cancel-button=\"never\"\n                        placeholder=\"Code postal ou ville\"\n                        class=\"search\">\n            </ion-input>\n            <ion-button expand=\"full\" type=\"submit\" color=\"dark\">RECHERCHER</ion-button>\n        </ion-toolbar>\n    </form>\n    <ion-button expand=\"full\" color=\"light\" @click=\"reloadPage\" >reset</ion-button>\n    <ResultatDeRecherche v-bind:result=\"result\"/>\n</template>\n<script>\n    import ResultatDeRecherche from \"@/components/communes/ResultatDeRecherche\";\n    import axios from \"axios\";\n    export default {\n        name: 'RechercheCommunes',\n        components: {\n            ResultatDeRecherche,\n        },\n        data () {\n            return {\n                ville: \"\",\n                result:null,\n            };\n        },\n        methods: {\n            onSubmit(e){\n                e.preventDefault(this.ville)\n                console.log(this.ville)\n                {\n                    const isValidName = /^[a-zA-Z]+$/.test(this.ville)\n                    const isValidZip = /^[0-9]{5}?$/.test(this.ville)\n                    if (isValidZip){\n                        axios.get(`https://geo.api.gouv.fr/communes?codePostal=${this.ville}` )\n                            .then((response) => {\n                                response.data\n                                this.result = response.data\n                                console.log(this.result)\n                            });\n                    } else {\n                        if (isValidName)\n                            axios.get(`https://geo.api.gouv.fr/communes?nom=${this.ville}&boost=population&fields=population,departement,codesPostaux,region` )\n                                .then((response) => {\n                                    response.data\n                                        this.result = response.data\n                                        console.log(this.result)\n                              });\n                        if (!isValidName || this.ville === \"\"){\n                            alert('veuillez entrer une ville ou code postal valide, merci!');\n                        }\n                    }\n                }\n            },\n            reloadPage(){\n                this.result = null\n            }\n        },\n    };\n</script>"],"sourceRoot":""}]}